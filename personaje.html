<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Personajes de Rol</title>
    <style>
        /* Diseño básico */
        body {
            display: flex;
            font-family: Arial, sans-serif;
            margin: 0;
            height: 100vh;
        }
        .container {
            display: flex;
            width: 100%;
        }
        .left-panel, .right-panel {
            padding: 20px;
            box-sizing: border-box;
        }
        .left-panel {
            width: 50%;
            background-color: #f4f4f4;
            border-right: 2px solid #ccc;
        }
        .right-panel {
            width: 50%;
            background-color: #ffffff;
        }
        h2 {
            margin-top: 0;
        }
        .stat {
            margin-bottom: 10px;
        }
        .character-preview {
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }
        .roll-select option.available {
            color: green;
        }
        .roll-select option.unavailable {
            color: red;
        }
        table.stats-table {
            width: 100%;
            border-collapse: collapse;
        }
        table.stats-table th, table.stats-table td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <h2>Opciones del Personaje</h2>
            <div class="stat">
                <label for="race">Raza:</label>
                <select id="race" onchange="loadBaseStats()">
                    <option value="Enano">Enano</option>
                    <option value="Elfo">Elfo</option>
                    <option value="Mediano">Mediano</option>
                    <option value="Humano">Humano</option>
                    <option value="Semiogro">Semiogro</option>
                    <option value="Pato">Pato</option>
                </select>
            </div>

            <div class="stat">
                <label for="class">Clase:</label>
                <select id="class" onchange="updateClassStats()">
                    <option value="Alquimista">Alquimista</option>
                    <!-- Agrega más opciones aquí si lo deseas -->
                </select>
            </div>

            <div class="stat">
                <label><input type="checkbox" id="advantageOption" onchange="toggleAdvantage()"> Opción ventajosa</label>
            </div>

            <button onclick="generateRolls()">Generar Tiradas</button>

            <h3>Estadísticas Base</h3>
            <table class="stats-table">
                <thead>
                    <tr>
                        <th>FUE</th>
                        <th>CON</th>
                        <th>DES</th>
                        <th>SAB</th>
                        <th>DET</th>
                        <th>VIT</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="base-values">
                        <td id="base-strength">-</td>
                        <td id="base-constitution">-</td>
                        <td id="base-dexterity">-</td>
                        <td id="base-wisdom">-</td>
                        <td id="base-determination">-</td>
                        <td id="base-vitality">-</td>
                    </tr>
                    <tr id="roll-values" style="display: none;">
                        <td id="roll-strength">-</td>
                        <td id="roll-constitution">-</td>
                        <td id="roll-dexterity">-</td>
                        <td id="roll-wisdom">-</td>
                        <td id="roll-determination">-</td>
                        <td id="roll-vitality-2">-</td>
                    </tr>
                    <tr>
                        <td colspan="6" id="remaining-points" style="text-align: center;"><strong>Distribuye 15 puntos adicionales</strong></td>
                    </tr>
                    <tr>
                        <td><input type="number" id="extra-strength" value="0" min="0" max="10" onchange="updateExtraPoints()"></td>
                        <td><input type="number" id="extra-constitution" value="0" min="0" max="10" onchange="updateExtraPoints()"></td>
                        <td><input type="number" id="extra-dexterity" value="0" min="0" max="10" onchange="updateExtraPoints()"></td>
                        <td><input type="number" id="extra-wisdom" value="0" min="0" max="10" onchange="updateExtraPoints()"></td>
                        <td><input type="number" id="extra-determination" value="0" min="0" max="10" onchange="updateExtraPoints()"></td>
                        <td id="extra-vitality">-</td>
                    </tr>
                    <tr>
                        <td colspan="6" id="totallabel-points" style="text-align: center;"><strong>ESTADÍSTICAS TOTALES</strong></td>
                    </tr>
                    <tr>
                        <td><span id="final-strength">-</span></td>
                        <td><span id="final-constitution">-</span></td>
                        <td><span id="final-dexterity">-</span></td>
                        <td><span id="final-wisdom">-</span></td>
                        <td><span id="final-determination">-</span></td>
                        <td><span id="final-vitality">-</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="right-panel">
            <h2>Vista Previa del Personaje</h2>
            <div class="character-preview" id="character-preview">
                <p><strong>Raza:</strong> <span id="preview-race">-</span></p>
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>FUE</th>
                            <th>CON</th>
                            <th>DES</th>
                            <th>SAB</th>
                            <th>DET</th>
                            <th>VIT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="base-values">
                            <td id="preview-strength">-</td>
                            <td id="preview-constitution">-</td>
                            <td id="preview-dexterity">-</td>
                            <td id="preview-wisdom">-</td>
                            <td id="preview-determination">-</td>
                            <td id="preview-vitality">-</td>
                        </tr>
                    </tbody>
                </table>
              
                <p><strong>Clase:</strong> <span id="preview-class">-</span></p>
                <h3>Estadísticas de Combate</h3>
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>HC</th><th>HD</th><th>ESQ</th>
                            <th>FC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="preview-HC">-</td><td id="preview-HD">-</td><td id="preview-ESQ">-</td>
                            <td id="preview-FC">-</td>
                        </tr>
                    </tbody>
                </table>
                <table class="stats-table">
                    <thead>
                        <tr><th>AA</th><th>TRU</th><th>CU</th><th>ALQ</th><th>PER</th><th>MANA</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="preview-AA">-</td><td id="preview-TRU">-</td><td id="preview-CU">-</td>
                            <td id="preview-ALQ">-</td><td id="preview-PER">-</td><td id="preview-MANA">-</td>
                        </tr>
                    </tbody>
                </table>
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>SUP</th><th>BD</th><th>AN</th><th>ENR</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="preview-SUP">-</td><td id="preview-BD">-</td><td id="preview-AN">-</td><td id="preview-ENR">1</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const raceStats = {
            "Enano": { strength: 40, constitution: 30, dexterity: 25, wisdom: 25, determination: 30, vitality: "1d6+6" },
            "Elfo": { strength: 25, constitution: 20, dexterity: 40, wisdom: 35, determination: 30, vitality: "1d6+8" },
            "Mediano": { strength: 20, constitution: 20, dexterity: 40, wisdom: 30, determination: 40, vitality: "1d6+5" },
            "Humano": { strength: 30, constitution: 30, dexterity: 30, wisdom: 30, determination: 30, vitality: "1d6+7" },
            "Semiogro": { strength: 50, constitution: 40, dexterity: 25, wisdom: 15, determination: 40, vitality: "2d6+10" },
            "Pato": { strength: 25, constitution: 25, dexterity: 30, wisdom: 30, determination: 40, vitality: "1d6+6" }
        };

        const classModifiers = {
            "Alquimista": { HC: -5, HD: -5, ESQ: -10, FC: -20, AA: "N/A", TRU: 0, CU: 5, ALQ: 10, PER: -10, MANA: "N/A", SUP: -20, BD: 0, AN: "N/A", ENR: 0 },
        };

        let finalStats = {};
        let rolls = [];
        let remainingPoints = 15;

        function loadBaseStats() {
            const race = document.getElementById("race").value;
            const stats = raceStats[race];

            for (let [key, value] of Object.entries(stats)) {
                finalStats[key] = value;
                if (key === 'vitality') {
                    const vitalityRoll = rollDice(value);
                    document.getElementById("base-" + key).textContent = value;
                    finalStats[key] = vitalityRoll;
                } else {
                    document.getElementById("base-" + key).textContent = value;
                }
                document.getElementById("final-" + key).textContent = value;
            }

            calculateClassModifiers();
            updatePreview();
        }

        function calculateClassModifiers() {
            const selectedClass = document.getElementById("class").value;
            const modifiers = classModifiers[selectedClass] || {};

            ["HC", "HD", "ESQ", "FC", "AA", "TRU", "CU", "ALQ", "PER", "MANA", "SUP", "BD", "AN", "ENR"].forEach(stat => {
                let finalValue;

                if (modifiers[stat] === "N/A") {
                    finalValue = "-";
                } else {
                    const baseValue = finalStats[stat] || 0;
                    finalValue = baseValue + (modifiers[stat] || 0);
                }

                document.getElementById("preview-" + stat).textContent = finalValue;
            });
        }

        function generateRolls() {
            rolls = Array.from({ length: 5 }, () => Math.floor(Math.random() * 10) + 1);
            const advantage = document.getElementById("advantageOption").checked;

            resetExtraPoints();

            if (advantage) {
                showRollSelectors();
                document.getElementById("roll-values").style.display = 'none';
            } else {
                applyRollsDirectly();
                hideRollSelectors();
                document.getElementById("roll-values").style.display = 'table-row';
                ["strength", "constitution", "dexterity", "wisdom", "determination"].forEach((stat, i) => {
                    document.getElementById("roll-" + stat).textContent = rolls[i];
                });
            }

            calculateVitality(document.getElementById("race").value);
            calculateClassModifiers();
            updatePreview();
        }

        function applyRollsDirectly() {
            ["strength", "constitution", "dexterity", "wisdom", "determination"].forEach((stat, i) => {
                const baseValue = raceStats[document.getElementById("race").value][stat];
                finalStats[stat] = baseValue + rolls[i];
                document.getElementById("final-" + stat).textContent = finalStats[stat];
            });
            calculateClassModifiers();
            updatePreview();
        }

        function updateAdjustedStats() {
            ["strength", "constitution", "dexterity", "wisdom", "determination"].forEach(stat => {
                const baseValue = raceStats[document.getElementById("race").value][stat];
                const selectedValue = parseInt(document.getElementById("select-" + stat).value) || 0;
                const extraValue = parseInt(document.getElementById("extra-" + stat).value) || 0;
                finalStats[stat] = baseValue + selectedValue + extraValue;
                document.getElementById("final-" + stat).textContent = finalStats[stat];
            });
            calculateClassModifiers();
            updatePreview();
        }

        function updateExtraPoints() {
            let totalExtraPoints = 0;
            ["strength", "constitution", "dexterity", "wisdom", "determination"].forEach(stat => {
                const value = parseInt(document.getElementById("extra-" + stat).value) || 0;
                totalExtraPoints += value;
            });

            if (totalExtraPoints > 15) {
                alert("No puedes asignar más de 15 puntos en total.");
                resetExtraPoints();
                totalExtraPoints = 15;
            }

            remainingPoints = 15 - totalExtraPoints;
            document.getElementById("remaining-points").textContent = "Distribuye " + remainingPoints + " puntos adicionales";

            updateAdjustedStats();
        }

        function resetExtraPoints() {
            ["strength", "constitution", "dexterity", "wisdom", "determination"].forEach(stat => {
                document.getElementById("extra-" + stat).value = 0;
            });
        }

        function calculateVitality(race) {
            const vitalityStat = raceStats[race].vitality;
            const vitalityValue = rollDice(vitalityStat);
            finalStats["vitality"] = vitalityValue;
            document.getElementById("final-vitality").textContent = vitalityValue;
            document.getElementById("roll-vitality").textContent = vitalityValue;
        }

        function updatePreview() {
            document.getElementById("preview-race").textContent = document.getElementById("race").value;
            ["strength", "constitution", "dexterity", "wisdom", "determination", "vitality"].forEach(stat => {
                document.getElementById("preview-" + stat).textContent = finalStats[stat];
            });
        }

        window.onload = loadBaseStats;
    </script>
</body>
</html>
